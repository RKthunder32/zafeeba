// Preloader
window.addEventListener('load', function() {
    const preloader = document.querySelector('.preloader');
    gsap.to(preloader, {
        opacity: 0,
        duration: 0.5,
        onComplete: function() {
            preloader.style.display = 'none';
        }
    });
});

// Navigation Scroll Effect
window.addEventListener('scroll', function() {
    const nav = document.querySelector('.luxury-nav');
    if (window.scrollY > 50) {
        nav.style.backgroundColor = 'rgba(0,0,0,0.95)';
        nav.style.padding = '10px 0';
    } else {
        nav.style.backgroundColor = 'rgba(0,0,0,0.8)';
        nav.style.padding = '15px 0';
    }
});

// GSAP Animations
gsap.registerPlugin(ScrollTrigger);

// Hero Text Animation
gsap.from('.hero h1', {
    duration: 1,
    y: 50,
    opacity: 0,
    ease: 'power3.out'
});

gsap.from('.hero-subtitle', {
    duration: 1,
    y: 50,
    opacity: 0,
    ease: 'power3.out',
    delay: 0.3
});

gsap.from('.hero-buttons', {
    duration: 1,
    y: 50,
    opacity: 0,
    ease: 'power3.out',
    delay: 0.6
});

// Section Animations
gsap.utils.toArray('section').forEach(section => {
    const heading = section.querySelector('h2');
    const content = section.querySelectorAll('p, .collection-item, .experience-item, .testimonial-item, .form-group');
    
    if (heading) {
        gsap.from(heading, {
            scrollTrigger: {
                trigger: section,
                start: 'top 80%',
                toggleActions: 'play none none none'
            },
            y: 50,
            opacity: 0,
            duration: 0.8
        });
    }
    
    if (content) {
        gsap.from(content, {
            scrollTrigger: {
                trigger: section,
                start: 'top 80%',
                toggleActions: 'play none none none'
            },
            y: 50,
            opacity: 0,
            duration: 0.8,
            stagger: 0.2
        });
    }
});

// Founder Image Animation
gsap.from('.founder-image', {
    scrollTrigger: {
        trigger: '.founder-section',
        start: 'top 80%',
        toggleActions: 'play none none none'
    },
    x: -100,
    opacity: 0,
    duration: 1
});

gsap.from('.founder-content', {
    scrollTrigger: {
        trigger: '.founder-section',
        start: 'top 80%',
        toggleActions: 'play none none none'
    },
    x: 100,
    opacity: 0,
    duration: 1
});

// Testimonial Slider
let currentTestimonial = 0;
const testimonials = [
    {
        quote: "Zafeeba's Royal Oud is the only fragrance I wear. It's worth every penny of its $5,800 price tag. I receive compliments daily from world leaders and celebrities.",
        name: "Sheikh Ahmed",
        title: "Royal Family Member",
        image: "https://example.com/client1.jpg"
    },
    {
        quote: "Diamond Essence is unlike anything else. The scent evolves throughout the day in the most mesmerizing way. It's an experience, not just a perfume.",
        name: "Victoria Kensington",
        title: "CEO, Luxury Holdings",
        image: "https://example.com/client2.jpg"
    },
    {
        quote: "Qari Bilal created a bespoke fragrance for my wedding that captured the essence of our love story. It was worth the $25,000 price for this one-of-a-kind masterpiece.",
        name: "Alexander Romanov",
        title: "Tech Billionaire",
        image: "https://example.com/client3.jpg"
    }
];

function showTestimonial(index) {
    const testimonial = testimonials[index];
    const testimonialContent = document.querySelector('.testimonial-content p');
    const clientInfo = document.querySelector('.client-info');
    
    gsap.to(testimonialContent, {
        duration: 0.3,
        opacity: 0,
        y: 20,
        onComplete: function() {
            testimonialContent.textContent = testimonial.quote;
            clientInfo.innerHTML = `
                <img src="${testimonial.image}" alt="${testimonial.name}">
                <div>
                    <h4>${testimonial.name}</h4>
                    <p>${testimonial.title}</p>
                </div>
            `;
            gsap.fromTo(testimonialContent, 
                { opacity: 0, y: 20 },
                { opacity: 1, y: 0, duration: 0.3 }
            );
            gsap.from(clientInfo, {
                opacity: 0,
                y: 20,
                duration: 0.3,
                delay: 0.2
            });
        }
    });
}

// Auto-rotate testimonials
setInterval(function() {
    currentTestimonial = (currentTestimonial + 1) % testimonials.length;
    showTestimonial(currentTestimonial);
}, 5000);

// Mobile Menu Toggle
const mobileMenu = document.querySelector('.mobile-menu');
const navLinks = document.querySelector('.nav-links');

mobileMenu.addEventListener('click', function() {
    navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
});

// WhatsApp Click Event
const whatsappBtn = document.querySelector('.whatsapp-float');
whatsappBtn.addEventListener('click', function() {
    gsap.to(whatsappBtn, {
        scale: 1.2,
        duration: 0.2,
        yoyo: true,
        repeat: 1
    });
});
